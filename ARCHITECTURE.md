# üèóÔ∏è Component Architecture Documentation

## üìã Overview

This document outlines the component architecture, design patterns, and structural decisions made in the KB StarBanking Clone project, with special focus on the recent standardization efforts and pixel-perfect implementations.

## üéØ Architecture Principles

### 1. **Consistency First**
- Standardized header pattern across all pages
- Unified styling approach using design tokens
- Consistent component interfaces and prop patterns

### 2. **Pixel-Perfect Accuracy**
- 1:1 visual matching with original KB StarBanking app
- Exact color reproduction using hex values
- Precise typography and spacing measurements

### 3. **Modern React Patterns**
- Functional components with hooks
- TypeScript for type safety
- Styled Components for CSS-in-JS
- Performance optimization through memoization

### 4. **Mobile-First Responsive Design**
- Touch-optimized interfaces
- Responsive breakpoints
- Progressive enhancement for larger screens

## üß± Component Hierarchy

### Application Structure
```
App
‚îú‚îÄ‚îÄ Router
‚îÇ   ‚îú‚îÄ‚îÄ AuthRoutes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginScreen
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IdPasswordLoginPage
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FindIdPage
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ResetPasswordPage
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ ProtectedRoutes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardPage
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ComprehensiveAccountPage
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AccountTransactionPage
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AccountInquiryPage
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TransferPage
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ SharedComponents
‚îÇ       ‚îú‚îÄ‚îÄ Headers (Standardized)
‚îÇ       ‚îú‚îÄ‚îÄ Navigation (TabBar)
‚îÇ       ‚îú‚îÄ‚îÄ Modals
‚îÇ       ‚îî‚îÄ‚îÄ UI Components
```

### Header System Architecture
```
Standardized Header Pattern
‚îú‚îÄ‚îÄ Container (Header)
‚îÇ   ‚îú‚îÄ‚îÄ BackButton
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Arrow Text (‚Üê)
‚îÇ   ‚îú‚îÄ‚îÄ HeaderTitle
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Page Title Text
‚îÇ   ‚îî‚îÄ‚îÄ Spacer
‚îÇ       ‚îî‚îÄ‚îÄ Empty Div (48px width)
```

### Transaction Page Architecture
```
AccountTransactionPage
‚îú‚îÄ‚îÄ Standardized Header
‚îú‚îÄ‚îÄ AccountInfoSection
‚îÇ   ‚îú‚îÄ‚îÄ AccountHeader
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AccountLeft
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AccountTitle (Name + Edit Icon)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AccountNumber (Number + Dropdown)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SettingsIcon
‚îÇ   ‚îú‚îÄ‚îÄ BalanceSection
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MainBalance (32px font)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SubBalance (Ï∂úÍ∏àÍ∞ÄÎä•Í∏àÏï°)
‚îÇ   ‚îî‚îÄ‚îÄ ActionButton (ATM/Ï∞ΩÍµ¨Ï∂úÍ∏à)
‚îú‚îÄ‚îÄ SearchFilterSection
‚îÇ   ‚îú‚îÄ‚îÄ SearchRow
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SearchLeft (üîç + Filter Text)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ToggleSection (ÏûîÏï°ÌëúÍ∏∞ + Switch)
‚îÇ   ‚îî‚îÄ‚îÄ DateRangeRow
‚îî‚îÄ‚îÄ TransactionList
    ‚îî‚îÄ‚îÄ TransactionGroup(s)
        ‚îî‚îÄ‚îÄ TransactionItem(s)
```

## üé® Design System Architecture

### Color Token System
```typescript
// Design Tokens Hierarchy
tokens.colors
‚îú‚îÄ‚îÄ brand
‚îÇ   ‚îú‚îÄ‚îÄ primary: '#FFBF00'         // KB Main Yellow
‚îÇ   ‚îú‚îÄ‚îÄ light: '#FFD338'           // Light variant
‚îÇ   ‚îú‚îÄ‚îÄ pressed: '#FF9F00'         // Pressed state
‚îÇ   ‚îî‚îÄ‚îÄ extraLight: '#FFF9E6'      // Background tint
‚îÇ
‚îú‚îÄ‚îÄ transaction
‚îÇ   ‚îú‚îÄ‚îÄ withdrawal: '#E74C3C'      // Ï∂úÍ∏à amounts
‚îÇ   ‚îú‚îÄ‚îÄ deposit: '#4285F4'         // ÏûÖÍ∏à amounts
‚îÇ   ‚îî‚îÄ‚îÄ balance: '#666666'         // ÏûîÏï° text
‚îÇ
‚îú‚îÄ‚îÄ text
‚îÇ   ‚îú‚îÄ‚îÄ primary: '#26282c'         // Headers & primary
‚îÇ   ‚îú‚îÄ‚îÄ secondary: '#666666'       // Secondary info
‚îÇ   ‚îî‚îÄ‚îÄ tertiary: '#999999'        // Disabled/inactive
‚îÇ
‚îú‚îÄ‚îÄ background
‚îÇ   ‚îú‚îÄ‚îÄ white: '#ffffff'           // Main background
‚îÇ   ‚îú‚îÄ‚îÄ gray: '#f8f9fa'           // Section background
‚îÇ   ‚îî‚îÄ‚îÄ light: '#f5f6f8'          // Subtle background
‚îÇ
‚îî‚îÄ‚îÄ border
    ‚îú‚îÄ‚îÄ light: '#ebeef0'          // Subtle borders
    ‚îú‚îÄ‚îÄ medium: '#d1d5db'         // Medium borders
    ‚îî‚îÄ‚îÄ heavy: '#9ca3af'          // Strong borders
```

### Typography System
```typescript
// Typography Hierarchy
typography
‚îú‚îÄ‚îÄ header
‚îÇ   ‚îú‚îÄ‚îÄ fontSize: '18px'
‚îÇ   ‚îú‚îÄ‚îÄ fontWeight: 600
‚îÇ   ‚îî‚îÄ‚îÄ color: '#26282c'
‚îÇ
‚îú‚îÄ‚îÄ body
‚îÇ   ‚îú‚îÄ‚îÄ fontSize: '16px'
‚îÇ   ‚îú‚îÄ‚îÄ fontWeight: 400
‚îÇ   ‚îî‚îÄ‚îÄ color: '#333333'
‚îÇ
‚îú‚îÄ‚îÄ caption
‚îÇ   ‚îú‚îÄ‚îÄ fontSize: '14px'
‚îÇ   ‚îú‚îÄ‚îÄ fontWeight: 400
‚îÇ   ‚îî‚îÄ‚îÄ color: '#666666'
‚îÇ
‚îî‚îÄ‚îÄ transaction
    ‚îú‚îÄ‚îÄ amount
    ‚îÇ   ‚îú‚îÄ‚îÄ fontSize: '18px'
    ‚îÇ   ‚îú‚îÄ‚îÄ fontWeight: 600
    ‚îÇ   ‚îî‚îÄ‚îÄ letterSpacing: '-0.5px'
    ‚îÇ
    ‚îú‚îÄ‚îÄ description
    ‚îÇ   ‚îú‚îÄ‚îÄ fontSize: '17px'
    ‚îÇ   ‚îú‚îÄ‚îÄ fontWeight: 500
    ‚îÇ   ‚îî‚îÄ‚îÄ letterSpacing: '-0.3px'
    ‚îÇ
    ‚îî‚îÄ‚îÄ date
        ‚îú‚îÄ‚îÄ fontSize: '14px'
        ‚îú‚îÄ‚îÄ color: '#666666'
        ‚îî‚îÄ‚îÄ letterSpacing: '-0.2px'
```

### Spacing System
```typescript
// Consistent Spacing Scale
spacing
‚îú‚îÄ‚îÄ xs: '4px'      // Micro spacing
‚îú‚îÄ‚îÄ sm: '8px'      // Small gaps
‚îú‚îÄ‚îÄ md: '16px'     // Standard spacing
‚îú‚îÄ‚îÄ lg: '24px'     // Large sections
‚îî‚îÄ‚îÄ xl: '32px'     // Major sections

// Component-Specific Spacing
component.spacing
‚îú‚îÄ‚îÄ header.height: '48px'
‚îú‚îÄ‚îÄ container.padding: '24px'
‚îú‚îÄ‚îÄ transaction.padding: '18px 24px'  // Optimized
‚îú‚îÄ‚îÄ month.header.padding: '16px 24px' // Optimized
‚îî‚îÄ‚îÄ button.minHeight: '44px'          // Touch target
```

## üîß Component Patterns

### 1. Standardized Header Pattern

#### Interface Definition
```typescript
interface StandardHeaderProps {
  title: string;
  onBack?: () => void;
  showBackButton?: boolean;
}
```

#### Implementation Pattern
```typescript
const StandardHeader: React.FC<StandardHeaderProps> = ({ 
  title, 
  onBack = () => navigate(-1),
  showBackButton = true 
}) => (
  <Header>
    {showBackButton && (
      <BackButton onClick={onBack}>
        <span style={{ fontSize: '18px', transform: 'rotate(180deg)' }}>‚Üí</span>
      </BackButton>
    )}
    <HeaderTitle>{title}</HeaderTitle>
    <div style={{ width: 48 }}></div>
  </Header>
);
```

#### Styled Components
```typescript
export const Header = styled.header`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 24px;
  height: 48px;
  background-color: ${tokens.colors.background.white};
  border-bottom: 1px solid ${tokens.colors.border.light};
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
`;

export const BackButton = styled.button`
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  
  &:active {
    opacity: 0.7;
  }
`;

export const HeaderTitle = styled.h1`
  font-size: 18px;
  font-weight: 600;
  color: ${tokens.colors.text.primary};
  margin: 0;
`;
```

### 2. Transaction Component Pattern

#### Transaction Item Architecture
```typescript
interface TransactionItemProps {
  transaction: Transaction;
  showBalance?: boolean;
  onClick?: (transaction: Transaction) => void;
  dateFormat?: 'full' | 'time' | 'date';
  animationIndex?: number;
}

const TransactionItem: React.FC<TransactionItemProps> = ({
  transaction,
  showBalance = true,
  onClick,
  dateFormat = 'full',
  animationIndex
}) => {
  // Type and color determination logic
  const isPositive = transaction.transaction_type === 'ÏûÖÍ∏à' || transaction.amount > 0;
  const typeText = determineTransactionType(transaction);
  
  return (
    <ItemContainer $animationIndex={animationIndex} onClick={() => onClick?.(transaction)}>
      <ItemContent>
        <ItemInfo>
          <DateTime>{formatTransactionDate(transaction.transaction_date, dateFormat)}</DateTime>
          <Description>{transaction.description}</Description>
        </ItemInfo>
        <AmountSection>
          <Amount $isPositive={isPositive}>
            {typeText} {formatCurrency(Math.abs(transaction.amount))}Ïõê
          </Amount>
          {showBalance && (
            <Balance>ÏûîÏï° {formatCurrency(transaction.balance_after)}Ïõê</Balance>
          )}
        </AmountSection>
      </ItemContent>
    </ItemContainer>
  );
};
```

#### Color Logic Pattern
```typescript
// Centralized transaction type and color logic
const determineTransactionType = (transaction: Transaction): string => {
  if (transaction.transaction_type === 'Ïù¥Ï≤¥') return 'Ï∂úÍ∏à';
  if (transaction.transaction_type === 'ÏûÖÍ∏à') return 'ÏûÖÍ∏à';
  return transaction.amount > 0 ? 'ÏûÖÍ∏à' : 'Ï∂úÍ∏à';
};

const getTransactionColor = (transaction: Transaction): string => {
  const isPositive = transaction.transaction_type === 'ÏûÖÍ∏à' || transaction.amount > 0;
  return isPositive ? tokens.colors.transaction.deposit : tokens.colors.transaction.withdrawal;
};
```

### 3. Modal Component Pattern

#### Base Modal Structure
```typescript
interface BaseModalProps {
  show: boolean;
  onClose: () => void;
  title?: string;
  children: React.ReactNode;
}

const BaseModal: React.FC<BaseModalProps> = ({ show, onClose, title, children }) => {
  if (!show) return null;

  return (
    <ModalOverlay onClick={onClose}>
      <ModalContent onClick={e => e.stopPropagation()}>
        {title && (
          <ModalHeader>
            <ModalTitle>{title}</ModalTitle>
            <CloseButton onClick={onClose}>√ó</CloseButton>
          </ModalHeader>
        )}
        <ModalBody>{children}</ModalBody>
      </ModalContent>
    </ModalOverlay>
  );
};
```

### 4. Form Component Pattern

#### Input Component
```typescript
interface InputFieldProps {
  label: string;
  value: string;
  onChange: (value: string) => void;
  type?: 'text' | 'password' | 'number';
  placeholder?: string;
  error?: string;
  required?: boolean;
}

const InputField: React.FC<InputFieldProps> = ({
  label,
  value,
  onChange,
  type = 'text',
  placeholder,
  error,
  required = false
}) => (
  <FieldContainer>
    <Label $required={required}>{label}</Label>
    <Input
      type={type}
      value={value}
      onChange={e => onChange(e.target.value)}
      placeholder={placeholder}
      $hasError={!!error}
    />
    {error && <ErrorMessage>{error}</ErrorMessage>}
  </FieldContainer>
);
```

## üîÑ State Management Architecture

### 1. Local State Pattern
```typescript
// Component-level state for UI interactions
const useComponentState = () => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [data, setData] = useState<DataType[]>([]);

  const reset = useCallback(() => {
    setLoading(false);
    setError(null);
    setData([]);
  }, []);

  return { loading, error, data, setLoading, setError, setData, reset };
};
```

### 2. Context Pattern for Global State
```typescript
// AuthContext pattern
interface AuthContextType {
  user: User | null;
  isAuthenticated: boolean;
  login: (credentials: LoginCredentials) => Promise<void>;
  logout: () => void;
  loading: boolean;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error('useAuth must be used within AuthProvider');
  }
  return context;
};
```

### 3. Custom Hooks Pattern
```typescript
// Reusable business logic hooks
const useTransactions = (options: UseTransactionsOptions) => {
  const [transactions, setTransactions] = useState<Transaction[]>([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [pagination, setPagination] = useState<PaginationInfo | null>(null);

  const loadTransactions = useCallback(async (filters?: TransactionFilter) => {
    try {
      setLoading(true);
      const result = await transactionService.getTransactions(filters);
      setTransactions(result.data);
      setPagination(result.pagination);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Unknown error');
    } finally {
      setLoading(false);
    }
  }, []);

  const loadMore = useCallback(async () => {
    if (!pagination?.has_next || loading) return;
    
    try {
      const result = await transactionService.getTransactions({
        page: pagination.current_page + 1
      });
      setTransactions(prev => [...prev, ...result.data]);
      setPagination(result.pagination);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Failed to load more');
    }
  }, [pagination, loading]);

  return {
    transactions,
    loading,
    error,
    pagination,
    loadTransactions,
    loadMore,
    refresh: () => loadTransactions()
  };
};
```

## üìÅ File Organization Strategy

### Feature-Based Structure
```
src/features/transactions/
‚îú‚îÄ‚îÄ AccountTransactionPage.tsx           # Main page component
‚îú‚îÄ‚îÄ AccountTransactionPage.styles.ts     # Page-specific styles
‚îú‚îÄ‚îÄ components/                          # Feature components
‚îÇ   ‚îú‚îÄ‚îÄ AccountInfoSection.tsx
‚îÇ   ‚îú‚îÄ‚îÄ AccountInfoSection.styles.ts
‚îÇ   ‚îú‚îÄ‚îÄ SearchFilterSection.tsx
‚îÇ   ‚îú‚îÄ‚îÄ SearchFilterSection.styles.ts
‚îÇ   ‚îú‚îÄ‚îÄ TransactionItem.tsx
‚îÇ   ‚îú‚îÄ‚îÄ TransactionGroup.tsx
‚îÇ   ‚îî‚îÄ‚îÄ modals/
‚îÇ       ‚îú‚îÄ‚îÄ TransactionDetailModal.tsx
‚îÇ       ‚îî‚îÄ‚îÄ TransactionFilterModal.tsx
‚îú‚îÄ‚îÄ hooks/                               # Feature-specific hooks
‚îÇ   ‚îú‚îÄ‚îÄ useTransactions.ts
‚îÇ   ‚îú‚îÄ‚îÄ useTransactionFilters.ts
‚îÇ   ‚îî‚îÄ‚îÄ useTransactionExport.ts
‚îú‚îÄ‚îÄ utils/                               # Feature utilities
‚îÇ   ‚îú‚îÄ‚îÄ transactionUtils.ts
‚îÇ   ‚îî‚îÄ‚îÄ dateFormatters.ts
‚îî‚îÄ‚îÄ types/                               # Feature type definitions
    ‚îú‚îÄ‚îÄ transaction.types.ts
    ‚îî‚îÄ‚îÄ filter.types.ts
```

### Shared Components Structure
```
src/shared/components/
‚îú‚îÄ‚îÄ layout/                              # Layout components
‚îÇ   ‚îú‚îÄ‚îÄ Header/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StandardHeader.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginHeader.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Header.styles.ts
‚îÇ   ‚îú‚îÄ‚îÄ TabBar/
‚îÇ   ‚îî‚îÄ‚îÄ Navigation/
‚îú‚îÄ‚îÄ ui/                                  # Generic UI components
‚îÇ   ‚îú‚îÄ‚îÄ Button/
‚îÇ   ‚îú‚îÄ‚îÄ Input/
‚îÇ   ‚îú‚îÄ‚îÄ Modal/
‚îÇ   ‚îú‚îÄ‚îÄ Loading/
‚îÇ   ‚îî‚îÄ‚îÄ Icons/
‚îî‚îÄ‚îÄ forms/                               # Form components
    ‚îú‚îÄ‚îÄ FormField/
    ‚îú‚îÄ‚îÄ Validation/
    ‚îî‚îÄ‚îÄ Formatters/
```

## üéØ Performance Architecture

### 1. Component Optimization Strategy
```typescript
// Memoization pattern for expensive components
export const TransactionList = React.memo<TransactionListProps>(({ 
  transactions, 
  showBalance, 
  onTransactionClick 
}) => {
  const groupedTransactions = useMemo(() => 
    groupTransactionsByMonth(transactions), 
    [transactions]
  );

  return (
    <List>
      {Object.entries(groupedTransactions).map(([month, monthTransactions]) => (
        <TransactionGroup
          key={month}
          title={month}
          transactions={monthTransactions}
          showBalance={showBalance}
          onTransactionClick={onTransactionClick}
        />
      ))}
    </List>
  );
}, (prevProps, nextProps) => {
  return (
    prevProps.transactions.length === nextProps.transactions.length &&
    prevProps.showBalance === nextProps.showBalance &&
    prevProps.onTransactionClick === nextProps.onTransactionClick
  );
});
```

### 2. Lazy Loading Strategy
```typescript
// Route-based code splitting
const TransactionPage = lazy(() => 
  import('./features/transactions/AccountTransactionPage')
);

// Component-based code splitting for heavy features
const TransactionDetailModal = lazy(() => 
  import('./components/TransactionDetailModal')
);

// Usage with suspense
<Suspense fallback={<PageSkeleton />}>
  <TransactionPage />
</Suspense>
```

### 3. Virtual Scrolling Architecture
```typescript
// For large transaction lists
interface VirtualScrollProps {
  items: any[];
  itemHeight: number;
  containerHeight: number;
  renderItem: (item: any, index: number) => React.ReactNode;
}

const VirtualScrollList: React.FC<VirtualScrollProps> = ({
  items,
  itemHeight,
  containerHeight,
  renderItem
}) => {
  const [scrollTop, setScrollTop] = useState(0);
  
  const startIndex = Math.floor(scrollTop / itemHeight);
  const endIndex = Math.min(
    startIndex + Math.ceil(containerHeight / itemHeight) + 1,
    items.length
  );
  
  const visibleItems = items.slice(startIndex, endIndex);
  
  return (
    <ScrollContainer
      style={{ height: containerHeight }}
      onScroll={e => setScrollTop(e.currentTarget.scrollTop)}
    >
      <div style={{ height: items.length * itemHeight, position: 'relative' }}>
        <div style={{ transform: `translateY(${startIndex * itemHeight}px)` }}>
          {visibleItems.map((item, index) => 
            renderItem(item, startIndex + index)
          )}
        </div>
      </div>
    </ScrollContainer>
  );
};
```

## üß™ Testing Architecture

### 1. Component Testing Strategy
```typescript
// Unit test structure for components
describe('TransactionItem', () => {
  const mockTransaction: Transaction = {
    id: '1',
    amount: 10000,
    transaction_type: 'Ï∂úÍ∏à',
    description: 'Test Transaction',
    transaction_date: '2025-01-01T00:00:00Z',
    balance_after: 100000
  };

  it('displays withdrawal amount in red', () => {
    render(<TransactionItem transaction={mockTransaction} />);
    const amount = screen.getByText(/Ï∂úÍ∏à 10,000Ïõê/);
    expect(amount).toHaveStyle('color: #E74C3C');
  });

  it('toggles balance visibility', () => {
    const { rerender } = render(
      <TransactionItem transaction={mockTransaction} showBalance={true} />
    );
    expect(screen.getByText(/ÏûîÏï° 100,000Ïõê/)).toBeInTheDocument();

    rerender(<TransactionItem transaction={mockTransaction} showBalance={false} />);
    expect(screen.queryByText(/ÏûîÏï°/)).not.toBeInTheDocument();
  });
});
```

### 2. Integration Testing Approach
```typescript
// Page-level integration tests
describe('AccountTransactionPage Integration', () => {
  beforeEach(() => {
    // Mock API responses
    jest.spyOn(transactionService, 'getTransactions').mockResolvedValue({
      data: mockTransactions,
      pagination: mockPagination
    });
  });

  it('loads and displays transaction data', async () => {
    render(<AccountTransactionPage />, { wrapper: TestWrapper });
    
    await waitFor(() => {
      expect(screen.getByText('Í±∞ÎûòÎÇ¥Ïó≠Ï°∞Ìöå')).toBeInTheDocument();
    });
    
    await waitFor(() => {
      expect(screen.getByText(/Ï∂úÍ∏à 10,000Ïõê/)).toBeInTheDocument();
    });
  });
});
```

### 3. Visual Regression Testing
```typescript
// Screenshot testing for pixel-perfect validation
describe('Visual Regression Tests', () => {
  it('matches transaction page layout', async () => {
    const page = await browser.newPage();
    await page.goto('http://localhost:3000/transactions');
    
    const screenshot = await page.screenshot({
      fullPage: true,
      clip: { x: 0, y: 0, width: 375, height: 812 } // iPhone X dimensions
    });
    
    expect(screenshot).toMatchImageSnapshot({
      threshold: 0.01, // 99% accuracy requirement
      customDiffConfig: {
        threshold: 0.01
      }
    });
  });
});
```

## üîß Build and Deployment Architecture

### 1. Build Optimization
```typescript
// Webpack configuration for optimal bundles
const webpackConfig = {
  optimization: {
    splitChunks: {
      chunks: 'all',
      cacheGroups: {
        vendor: {
          test: /[\\/]node_modules[\\/]/,
          name: 'vendors',
          chunks: 'all'
        },
        common: {
          name: 'common',
          minChunks: 2,
          chunks: 'all'
        }
      }
    }
  }
};
```

### 2. Asset Optimization
```typescript
// Image optimization strategy
const imageOptimization = {
  webp: true,
  quality: 85,
  progressive: true,
  lazy: true
};

// Icon sprite generation
const iconSprite = {
  src: 'src/assets/icons/*.svg',
  dest: 'public/sprites/icons.svg',
  prefix: 'icon-'
};
```

### 3. Environment Configuration
```typescript
// Environment-specific configurations
interface EnvironmentConfig {
  development: {
    apiUrl: 'http://localhost:3001/api';
    debug: true;
    hotReload: true;
  };
  staging: {
    apiUrl: 'https://staging-api.kb-clone.com';
    debug: false;
    analytics: true;
  };
  production: {
    apiUrl: 'https://api.kb-clone.com';
    debug: false;
    analytics: true;
    compression: true;
  };
}
```

## üìä Monitoring and Analytics Architecture

### 1. Performance Monitoring
```typescript
// Core Web Vitals tracking
const performanceMonitoring = {
  lcp: true, // Largest Contentful Paint
  fid: true, // First Input Delay
  cls: true, // Cumulative Layout Shift
  ttfb: true // Time to First Byte
};

// Custom performance metrics
const customMetrics = {
  transactionLoadTime: 'measure transaction list rendering',
  headerRenderTime: 'measure header component rendering',
  pageTransitionTime: 'measure page navigation speed'
};
```

### 2. Error Tracking
```typescript
// Error boundary with reporting
class ErrorBoundary extends React.Component {
  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    // Report to monitoring service
    errorTracker.captureException(error, {
      tags: {
        component: 'TransactionPage',
        feature: 'transaction-history'
      },
      extra: errorInfo
    });
  }
}
```

---

This architecture documentation provides a comprehensive overview of the component structure, design patterns, and technical decisions that drive the KB StarBanking Clone project. It serves as a reference for maintaining consistency and quality as the project evolves.

*Last updated: 2025-08-15*